/*!
(C) Andrea Giammarchi, @WebReflection - Mit Style License
*/
var Database=(function(o){var i,I=5*1024*1024,q=" TABLE ",z="DROP",C=" EXISTS ",n="IF",h=[].concat,D=B("readT"),g=B("t"),y=o.document,E=o.Math.max,d=o.SQLTransaction,k="openDatabase",j="_"+(""+Math.random()).slice(2),r="id INTEGER PRIMARY KEY AUTOINCREMENT",w=o.Array,t=w.isArray||function(L,K){K=L.call([]);return function J(M){return K==L.call(M)}}({}.toString),H=o.Object,f=H.defineProperty||function(L,J,K){L[J]=K.value;return L},e=v.prototype;function v(K){if(!(this instanceof v)){return new v(K)}var J=this;K||(K={});f(J,j,{enumerable:!1,writable:!0,configurable:!0,value:o[k](J.name=K.name||y.domain||"db",J.version=K.version||"1.0",J.description=K.description||"data",J.size=K.size||I,p)});J[j][j]=J;return J}function x(J){return h.call([],J===i?[]:J)}function u(){}function s(K,J,L){J[0]||(J[0]=r);this.query("CREATE"+q+n+" NOT"+C+K+" ("+J.join(", ")+")",L);return this}function B(K){K+="ransaction";return function J(O,L,N){var M=this;if(a(L)){N=L;L=[]}M[j][K](function(S){for(var V=x(O),P=G(L),R=0,T=E(V.length,P.length),U=(S[j]={self:M,fn:N,i:T}),Q;R<T;++R){S.executeSql(V[R]||V[0],P[R],l,A)}});return M}}function m(J,K){this.query(z+q+n+C+J,K);return this}function p(){}function A(K,J){if(K=K[j]){--K.i||(K.fn||p)({type:"error",error:J,db:K.self})}}function b(J,P,N){for(var Q=this,R=[],O=G(P),M=0,L=O.length,K=w(O[0].length+1).join(", ?").slice(2);M<L;++M){R[M]="INSERT INTO "+J+" VALUES ("+K+")"}Q.query(R,O,N);return Q}function a(J){return typeof J=="function"}function F(J){return this.result.rows.item(J)}function l(K,J){if(K=K[j]){--K.i||(K.fn||p)({type:"success",result:J,item:F,length:J.rows.length,db:K.self})}}function G(J){return !t(J)||typeof J[0]!="object"||!J[0]?[J]:J}function c(K,L){var J=this,N,M;J.read("SELECT * FROM sqlite_master WHERE name = ?",x(K),function(O){if(O.type=="success"){M=O.result.rows.item(0);if(M&&M.type=="table"&&(M.tbl_name||M.name)==K){return J.query([z+q+K,M.sql],L)}O.type="error";O.error=O.result;delete O.result}L(O)})}e.close=u;e.create=s;e.drop=m;e.insert=b;e.read=D;e.query=g;e.truncate=c;return v}(this));