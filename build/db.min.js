/*!
(C) Andrea Giammarchi, @WebReflection - Mit Style License
*/
var Database=(function(o){var i,H=5*1024*1024,q=" TABLE ",z="DROP",C=" EXISTS ",n="IF",h=[].concat,D=B("readT"),g=B("t"),y=o.document,E=o.Math.max,d=o.SQLTransaction,k="openDatabase",j="_"+(""+Math.random()).slice(2),r="id INTEGER PRIMARY KEY AUTOINCREMENT",w=o.Array,t=w.isArray||function(K,J){J=K.call([]);return function I(L){return J==K.call(L)}}({}.toString),G=o.Object,f=G.defineProperty||function(K,I,J){K[I]=J.value;return K},e=v.prototype;function v(J){if(!(this instanceof v)){return new v(J)}var I=this;J||(J={});f(I,j,{enumerable:!1,writable:!0,configurable:!0,value:o[k](I.name=J.name||y.domain||"db",I.version=J.version||"1.0",I.description=J.description||"data",I.size=J.size||H,p)});I[j][j]=I;return I}function x(I){return h.call([],I===i?[]:I)}function u(){}function s(J,I,K){I[0]||(I[0]=r);this.query("CREATE"+q+n+" NOT"+C+J+" ("+I.join(", ")+")",K);return this}function B(J){J+="ransaction";return function I(N,K,M){var L=this;if(a(K)){M=K;K=[]}L[j][J](function(R){for(var U=x(N),O=x(K),Q=0,S=E(U.length,O.length),T=(R[j]={self:L,fn:M,i:S}),P;Q<S;++Q){R.executeSql(U[Q]||U[0],x(O[Q]),l,A)}});return L}}function m(I,J){this.query(z+q+n+C+I,J);return this}function p(){}function A(J,I){if(J=J[j]){--J.i||(J.fn||p)({type:"error",error:I,db:J.self})}}function b(I,O,M){for(var P=this,Q=[],N=!t(O)||typeof O[0]!="object"||!O[0]?[O]:O,L=0,K=N.length,J=w(N[0].length+1).join(", ?").slice(2);L<K;++L){Q[L]="INSERT INTO "+I+" VALUES ("+J+")"}P.query(Q,N,M);return P}function a(I){return typeof I=="function"}function F(I){return this.result.rows.item(I)}function l(J,I){if(J=J[j]){--J.i||(J.fn||p)({type:"success",result:I,item:F,length:I.rows.length,db:J.self})}}function c(J,K){var I=this,M,L;I.read("SELECT * FROM sqlite_master WHERE name = ?",x(J),function(N){if(N.type=="success"){L=N.result.rows.item(0);if(L&&L.type=="table"&&(L.tbl_name||L.name)==J){return I.query([z+q+J,L.sql],K)}N.type="error";N.error=N.result;delete N.result}K(N)})}e.close=u;e.create=s;e.drop=m;e.insert=b;e.read=D;e.query=g;e.truncate=c;return v}(this));